.tabs-card {
  /*background: var(--card-bg-gradient);*/
  background: var(--card-bg-gradient), var(--main-background);
  box-shadow: var(--card-box-shadow);
  border-radius: var(--card-border-radius);
  padding: 0;
  box-sizing: border-box;
  color: var(--main-text);

}

/* Enhanced Tab Styling */
::ng-deep .mat-mdc-tab-group {
  /* Optional: Add background or border if needed */
  /*margin-bottom: 1rem; !* Add some space below the tabs *!*/
}

::ng-deep .mat-mdc-tab-header {
  /* Style the tab header container */
  /*border-bottom: 1px solid var(--table-border-color, #e0e0e0); !* Use a theme variable or lighter default *!*/
  /*background-color: var(--card-bg, #ffffff); !* Optional: Match card background *!*/
  border-radius: var(--card-border-radius) var(--card-border-radius) 0 0;
}

::ng-deep .mat-mdc-tab {
  /* Style individual tab labels */
  color: var(--faded); /* Use a theme variable */
  opacity: 0.7;
  height: 52px !important; /* Slightly taller tabs */
  padding: 0 24px !important; /* Increase horizontal padding */
  font-weight: 500; /* Medium font weight */
  transition: color 0.3s ease, opacity 0.3s ease; /* Smooth transition */
  background: none;
  box-shadow: none;
  background-color: transparent;
}

::ng-deep .mat-mdc-tab.mdc-tab .mdc-tab__text-label {
  color: var(--faded) !important;
}

::ng-deep .mat-mdc-tab:not(.mdc-tab--active):hover {
  opacity: 1;
  background-color: rgba(0,0,0,0.03); /* Subtle hover effect */
}

::ng-deep .mat-mdc-tab.mdc-tab--active {
  /* Style the active tab label */
  color: var(--primary) !important; /* Use primary theme color */
  opacity: 1;
  font-weight: 600; /* Slightly bolder active tab */
}

::ng-deep .mat-mdc-tab.mdc-tab--active .mdc-tab__text-label {
  color: var(--primary) !important;
}

::ng-deep .mat-mdc-tab .mdc-tab-indicator__content--underline {
  /* Style the active tab indicator line */
  border-color: var(--primary) !important; /* Use primary theme color */
  border-top-width: 3px !important; /* Make indicator thicker */
}

::ng-deep .mat-mdc-tab .mdc-tab__content {
  width: 100%;
  background: none;
  box-shadow: none;
  background-color: transparent;
}

::ng-deep .mat-mdc-tab-body-content {
  /* Style the content area of the tabs */
  padding-top: 1rem;
  min-height: 420px; /* Ensure content area has height for the chart */
  border-radius: 0 0 var(--card-border-radius) var(--card-border-radius);
  background: none;
  box-shadow: none;
  background-color: transparent;
}

/* Style for the tab body wrapper if needed */
::ng-deep .mat-mdc-tab-body-wrapper {
  background: none;
  box-shadow: none;
  background-color: transparent;
  /* background-color: var(--card-bg, #ffffff); Optional: Match card background */
}

/* Styles for the clickable card */
.tabs-card.is-collapsed {
  cursor: pointer;
  min-height: 60px; /* Adjust as needed for collapsed height */
  display: flex; /* Needed for collapsed-header alignment */
  align-items: center; /* Center content vertically */
  padding: 0 24px; /* Add padding for collapsed state */
  transition: min-height 0.3s ease-in-out, border-radius 0.3s ease-in-out; /* Smooth transition for height and radius */
  border-radius: var(--card-border-radius); /* Apply full radius when collapsed */
  overflow: hidden; /* Hide overflowing content when collapsed */
}

.tabs-card.is-expanded {
  border-radius: var(--card-border-radius); /* Keep consistent radius */
  padding: 0; /* Reset padding when expanded */
  cursor: default; /* Default cursor when expanded */
  min-height: auto; /* Allow natural height */
  overflow: visible; /* Show content when expanded */
}

/* Styles for the collapsed header */
.collapsed-header {
  display: flex;
  justify-content: space-between; /* Space out text and icon */
  align-items: center;
  width: 100%;
  font-weight: 500;
  color: var(--main-text); /* Use main text color */
  transition: background-color 0.2s ease; /* Add transition for hover */
}

/* Style the icon to be more button-like */
.expand-collapse-icon {
  color: var(--primary) !important; /* Use primary color */
  padding: 4px; /* Add some padding */
  border-radius: 50%; /* Make it circular */
  transition: background-color 0.2s ease, transform 0.3s ease-in-out; /* Smooth transitions */
  margin-left: 16px; /* Add space between text and icon */
}

.tabs-card.is-collapsed:hover .expand-collapse-icon {
  background-color: rgba(var(--rgb-primary), 0.1); /* Subtle background on hover */
}

/* Rotate icon when expanded */
.tabs-card.is-expanded .expand-collapse-icon {
  transform: rotate(180deg);
}


.tabs-card.is-collapsed:hover {
   background: var(--card-bg-gradient), color-mix(in srgb, var(--main-background) 90%, white 10%); /* Enhance hover background */
   box-shadow: var(--card-box-shadow-hover); /* Optional: Add hover shadow */
}

/* Wrapper for animation */
.expanded-content-wrapper {
  overflow: hidden; /* Crucial for height animation */
  width: 100%;
}

/* Ensure expanded content takes up space */
.expanded-content {
  width: 100%;
  height: 100%;
  /* Reset padding potentially added by collapsed state */
  padding: 0;
}

/* Override tab body padding if needed for animation */
.expanded-content-wrapper ::ng-deep .mat-mdc-tab-body-content {
   padding-top: 1rem; /* Re-apply padding inside the animated container */
}
